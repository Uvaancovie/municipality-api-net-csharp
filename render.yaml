services:
  - type: web
    name: municipal-api
    runtime: docker
    region: frankfurt   # closest region
    plan: free
    branch: main
    dockerfilePath: ./Dockerfile
    healthCheckPath: /health
    envVars:
      - key: ASPNETCORE_ENVIRONMENT
        value: Production
      - key: DatabaseProvider
        value: PostgreSQL
      - key: ConnectionStrings__DefaultConnection
        fromDatabase:
          name: municipal-db
          property: connectionString
      - key: Jwt__Key
        generateValue: true
        sync: false
      - key: Jwt__Issuer
        value: MunicipalApi
      - key: Jwt__Audience
        value: MunicipalApp
      - key: Jwt__ExpiryInMinutes
        value: 120
      - key: Cloudinary__CloudName
        sync: false
      - key: Cloudinary__ApiKey
        sync: false
      - key: Cloudinary__ApiSecret
        sync: false

databases:
  - name: municipal-db
    databaseName: municipal_services
    plan: free
    region: frankfurt
